var VueSimpleContextMenu=function(e,n){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t=function(e,n){return e(n={exports:{}},n.exports),n.exports}((function(e,n){var t,i,o,l,r,u,a,d;e.exports=(t="__v-click-outside",i="undefined"!=typeof window,o="undefined"!=typeof navigator,l=i&&("ontouchstart"in window||o&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],r=function(e){var n=e.event,t=e.handler;(0,e.middleware)(n)&&t(n)},u=function(e,n){var i=function(e){var n="function"==typeof e;if(!n&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:n?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||l,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(n.value),o=i.handler,u=i.middleware,a=i.detectIframe,d=i.capture;if(i.isActive){if(e[t]=i.events.map((function(n){return{event:n,srcTarget:document.documentElement,handler:function(n){return function(e){var n=e.el,t=e.event,i=e.handler,o=e.middleware,l=t.path||t.composedPath&&t.composedPath();(l?l.indexOf(n)<0:!n.contains(t.target))&&r({event:t,handler:i,middleware:o})}({el:e,event:n,handler:o,middleware:u})},capture:d}})),a){var c={event:"blur",srcTarget:window,handler:function(n){return function(e){var n=e.el,t=e.event,i=e.handler,o=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!n.contains(e)&&r({event:t,handler:i,middleware:o})}),0)}({el:e,event:n,handler:o,middleware:u})},capture:d};e[t]=[].concat(e[t],[c])}e[t].forEach((function(n){var i=n.event,o=n.srcTarget,l=n.handler;return setTimeout((function(){e[t]&&o.addEventListener(i,l,d)}),0)}))}},a=function(e){(e[t]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete e[t]},{install:function(e){e.directive("click-outside",d)},directive:d=i?{beforeMount:u,updated:function(e,n){var t=n.value,i=n.oldValue;JSON.stringify(t)!==JSON.stringify(i)&&(a(e),u(e,{value:t}))},unmounted:a}:{}})})),i={name:"Vue3ContextMenu",props:{modelValue:Boolean,elementId:{type:String,default:function(){return"simple-context-menu__"+n.getCurrentInstance().uid}},options:{type:Array,required:!0}},emits:["menu-closed","option-clicked"],directives:{"click-outside":t.directive},setup:function(e,t){var i=t.emit,o=n.ref(null),l=n.ref(null),r=n.ref(null);n.onMounted((function(){document.body.addEventListener("keyup",a)})),n.onUnmounted((function(){document.removeEventListener("keyup",a)}));var u=function(){var n=document.getElementById(e.elementId);n&&(n.classList.remove("vue-simple-context-menu--active"),i("menu-closed"))},a=function(e){27===e.keyCode&&u()};return{item:o,menuHeight:l,menuWidth:r,showMenu:function(n,t){t.value=t;var i=document.getElementById(e.elementId);i&&(r.value&&l.value||(i.style.visibility="hidden",i.style.display="block",r.value=i.offsetWidth,l.value=i.offsetHeight,i.removeAttribute("style")),r.value+n.pageX>=window.innerWidth?i.style.left=n.pageX-r.value+2+"px":i.style.left=n.pageX-2+"px",l.value+n.pageY>=window.innerHeight?i.style.top=n.pageY-l.value+2+"px":i.style.top=n.pageY-2+"px",i.classList.add("vue-simple-context-menu--active"))},hideContextMenu:u,onClickOutside:function(){u()},optionClicked:function(e){u(),i("option-clicked",{item:o.value,option:e})},onEscKeyRelease:a}}},o=["id"],l=["onClick"],r=["innerHTML"];function u(e){u.installed||(u.installed=!0,e.component("Vue3ContextMenu",i))}i.render=function(e,t,i,u,a,d){var c=n.resolveDirective("click-outside");return n.openBlock(),n.createElementBlock("div",null,[n.withDirectives((n.openBlock(),n.createElementBlock("ul",{id:i.elementId,class:"vue-simple-context-menu"},[(n.openBlock(!0),n.createElementBlock(n.Fragment,null,n.renderList(i.options,(function(e,t){return n.openBlock(),n.createElementBlock("li",{key:t,onClick:n.withModifiers((function(n){return u.optionClicked(e)}),["stop"]),class:n.normalizeClass(["vue-simple-context-menu__item",[e.class,"divider"===e.type?"vue-simple-context-menu__divider":""]])},[n.createElementVNode("span",{innerHTML:e.name},null,8,r)],10,l)})),128))],8,o)),[[c,u.onClickOutside]])])},i.__file="src/vue3-context-menu.vue";var a={install:u},d=null;return"undefined"!=typeof window?d=window.Vue:"undefined"!=typeof global&&(d=global.Vue),d&&d.use(a),e.default=i,e.install=u,e}({},Vue);
